# ============================================================
# DATABASE
# ============================================================
quarkus.datasource.db-kind=h2
quarkus.datasource.jdbc.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1
quarkus.datasource.username=sa
quarkus.datasource.password=sa

# schema generation strategy
quarkus.hibernate-orm.database.generation=drop-and-create
# optional: see SQL in the logs
quarkus.hibernate-orm.log.sql=false


# ============================================================
# HTTP / CORS
# ============================================================
quarkus.http.root-path=/api
quarkus.http.cors=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,PUT,POST,DELETE,OPTIONS
quarkus.http.cors.headers=*
quarkus.http.cors.access-control-allow-credentials=true

# ============================================================
# SECURITY / JWT
# ============================================================
# Disable fake users in dev (VERY important, otherwise JWT is bypassed)
quarkus.smallrye-jwt.always-create-token=false
quarkus.smallrye-jwt.verify.default-subject=false
# Where to find keys
mp.jwt.verify.publickey.location=../jwt/publicKey.pem
mp.jwt.verify.issuer=revoice-jwt
# Optional: if you want to sign JWTs from inside the app (e.g., /login endpoint)
smallrye.jwt.sign.key.location=../jwt/privateKey.pem
# Enforce auth (return 401 when no token instead of injecting dummy user)
quarkus.http.auth.proactive=true

# ============================================================
# LOGGING
# ============================================================
quarkus.log.level=DEBUG
quarkus.log.category."fr.revoicechat".level=DEBUG
# Uncomment to debug security
# quarkus.log.category."io.quarkus.security".level=DEBUG
# quarkus.log.category."io.smallrye.jwt".level=DEBUG

# ============================================================
# OPENAPI
# ============================================================
quarkus.swagger-ui.always-include=true

# ============================================================
# REVOICECHAT CUSTOM CONFIG
# ============================================================
revoicechat.global.sever-mode=MONO_SERVER
revoicechat.global.media-server-url=http://localhost:1
revoicechat.global.app-only-accessible-by-invitation=true
revoicechat.message.max-length=2000
